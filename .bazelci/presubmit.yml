---
tasks:
  gcc:
    name: "GCC"
    platform: ubuntu1804
    build_targets:
      - "//source/exe:envoy-static"
  rbe:
    name: "RBE"
    platform: ubuntu1804
    test_targets:
      - "//test/..."
    test_flags:
      - "--config=remote-clang-libc++"
      - "--config=remote-ci"
      - "--jobs=75"
  coverage:
    name: "Coverage"
    platform: ubuntu1804
    test_targets:
      - "//test/integration/..."
      - "//test/exe/..."
    test_flags:
      - "--config=coverage"
      - "--config=remote-clang-libc++"
      - "--config=remote-ci"
      - "--jobs=75"
      - "--local_test_jobs=HOST_CPUS"
      - "--test_env=PATH=/usr/lib/llvm-10/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
